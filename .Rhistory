library(tidyverse)
happiness <- read_csv('../legislators-current.csv')
getwd()
happiness <- read_csv('../datasets/legislators-current.csv')
legislators <- read_csv('../datasets/legislators-current.csv')
legislators
library(tidyverse)
happiness <- read_csv('../datasets/happiness_WHR.csv')
packages()
if(!require(wooldridge)){
install.packages("somepackage")
library(somepackage)
}
if(!require(wooldridge)){
install.packages("wooldridge")
library(wooldridge)
}
if(!require(wooldridge)){
install.packages("wooldridge")
library(wooldridge)
}
if(!require(wooldridge)){
install.packages("wooldridge")
library(wooldridge)
}
wine <- wooldridge::wine
library(tidyverse)
gss <- read_csv('../datasets/GSS_religion.csv')
library(tidyverse)
library(magrittr)
library(knitr)
library(patchwork)
library(moments)
library(tidyverse)
library(magrittr)
library(knitr)
library(patchwork)
#library(moments)
theme_set(theme_bw())
options(tinytex.verbose = TRUE)
knitr::opts_chunk$set(echo=FALSE, message=FALSE)
anes <- read_csv("anes_pilot_2018.csv")
nrow_original <- nrow(anes)
anes <- anes %>%
mutate(
voted_2016 = case_when(
turnout16 == 1 ~ T,
turnout16 == 2 ~ F,
turnout16 == 3 & turnout16b == 1 ~ T,
turnout16 == 3 & turnout16b == 2 ~ F),
voted_2018 = case_when(
turnout18 %in% 1:3 ~ T,
turnout18 == 4 ~ F,
turnout18 == 5 & turnout18ns == 1 ~ T,
turnout18 == 5 & turnout18ns == 2 ~ F)
)
anes <- anes %>%
filter(
geangry  >= 0,
geafraid >= 0,
!is.na(voted_2016),
!is.na(voted_2018)
)
nrow_valid1 <- nrow(anes)
anes <- anes %>%
filter(
birthyr < 1998
)
nrow_valid2 <- nrow(anes)
anes <- anes %>%
mutate(
emotions = case_when(
geafraid < geangry  ~ 'More Anger',
geafraid == geangry ~ 'Equal',
geafraid > geangry  ~ 'More Fear'),
emotions = factor(emotions, levels = c('More Anger', 'Equal', 'More Fear')),
voting_change = voted_2018 - voted_2016
)
summary_table <- anes %>%
mutate(
print_vote_2016 = case_when(
voted_2016 ~ 'Voted 2016',
!voted_2016 ~ 'Did not Vote 2016'),
print_vote_2018 = case_when(
voted_2018 ~ 'Voted 2018',
!voted_2018 ~ 'Did not Vote 2018')) %$%
prop.table(
table(
print_vote_2016,
print_vote_2018))
kable(
summary_table,
digits = 2,
caption = 'Self-Reported Voting Behavior in 2016 and 2018',
booktabs = TRUE,
)
fear_anger_joint <- anes %>%
ggplot(aes(x = geangry, y = geafraid)) +
geom_jitter(alpha = 0.20) +
labs(
x = 'Anger', y = 'Fear',
title = 'Fear & Anger Relationship')
turnout_by_emotion <-
anes %>%
select(voting_change, emotions) %>%
group_by(emotions) %>%
summarise(increase = mean(voting_change ==1), decrease = mean(voting_change==-1)) %>%
ggplot() +
geom_col( aes( x=emotions, y=increase, fill = 'Increase'),
width = 0.5,
position = 'stack') +
geom_text(aes( x=emotions, y=increase, label = paste(formatC(100 * increase,digits= 1, format = "f"),'%')),  hjust = 1, colour = "white") +
geom_col( aes( x=emotions, y=-decrease, , fill = 'Decrease'),
width = 0.5,
position = 'stack') +
geom_text(aes( x=emotions, y=-decrease, label = paste(formatC(100 * decrease,digits= 1, format = "f"),'%')),  hjust = -.1, colour = "white") +
annotate("text", x = 3.7, y = -.0008, label = "< Decrease   Increase >") +
expand_limits(x = 4) +
scale_y_continuous(limits = c(-.065, .065)) +
geom_hline(yintercept = 0) +
ylab('Fraction of Subjects') +
xlab(NULL)+
labs(fill="Voting Behavior") +
ggtitle('Changes in Voting Behavior')+
theme(legend.position = 'none') +
coord_flip()
(fear_anger_joint | turnout_by_emotion)
test <- anes %>% filter(emotions %in% c('More Anger', 'More Fear')) %>%
t.test(I(voting_change == 1) ~ emotions, data = .)
test <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(I(voting_change == 1) ~ emotions, data = .)
test <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(I(voting_change == 1) ~ emotions)
anes
anes$voting_change
test <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(I(voting_change == 1) ~ emotions)
test <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(I(voting_change == 1) ~ emotions)
test2 <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(I(voting_change == 1) ~ emotions)
test
test2
test2 <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(voting_change == 1 ~ emotions)
test2
test <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %$%
t.test(voting_change == 1 ~ emotions)
differences <- anes %>%
filter(
voted_2016 == 'Did not Vote',
voted_2018 == 'Voted',
geangry != geafraid) %>%
summarise(
more_angry = geangry > geafraid,
more_afraid = geangry < geafraid)
new_voters <- anes %>%
filter(emotions %in% c('More Anger', 'More Fear')) %>%
group_by(emotions) %>%
summarise(percent =  round(mean(voting_change==1) * 100, 2))
turnout_by_emotion <- anes %>%
select(voting_change, emotions) %>%
group_by(emotions) %>%
summarise(
increase = mean(voting_change ==1),
decrease = mean(voting_change==-1)) %>%
ggplot() +
geom_col( aes( x=emotions, y=increase, fill = 'Increase'),
width = 0.5,
position = 'stack') +
geom_text(aes( x=emotions, y=increase, label = paste(formatC(100 * increase,digits= 1, format = "f"),'%')),  hjust = 1, colour = "white") +
geom_col( aes( x=emotions, y=-decrease, , fill = 'Decrease'),
width = 0.5,
position = 'stack') +
geom_text(aes( x=emotions, y=-decrease, label = paste(formatC(100 * decrease,digits= 1, format = "f"),'%')),  hjust = -.1, colour = "white") +
annotate("text", x = 3.7, y = -.0008, label = "< Decrease   Increase >") +
expand_limits(x = 4) +
scale_y_continuous(limits = c(-.065, .065)) +
geom_hline(yintercept = 0) +
# ylab('Fraction of Subjects') +
# xlab(NULL)+
labs(
fill="Voting Behavior",
x=NULL,
y="Fraction of Subjects") +
ggtitle('Changes in Voting Behavior')+
theme(legend.position = 'none') +
coord_flip()
turnout_by_emotion <- anes %>%
select(voting_change, emotions) %>%
group_by(emotions) %>%
summarise(
increase = mean(voting_change == 1),
decrease = mean(voting_change == -1)) %>%
ggplot() +
geom_col(
aes(
x=emotions, y=increase,
fill = "Increase"),
width = 0.5,
position = "stack") +
geom_text(
aes(
x=emotions, y=increase,
label=paste(formatC(100 * increase,digits=1, format="f"), "%")),
hjust=1,
colour="white") +
geom_col(
aes(
x=emotions, y=-decrease,
fill="Decrease"),
width=0.5,
position="stack") +
geom_text(
aes(
x=emotions, y=-decrease,
label=paste(formatC(100 * decrease,digits=1, format="f"), "%")),
hjust=-.1,
colour = "white") +
annotate("text", x=3.7, y=-0.0008, label="< Decrease   Increase >") +
geom_hline(yintercept=0) +
expand_limits(x=4) +
scale_y_continuous(limits=c(-.065, .065)) +
labs(
title="Changes in Voting Behavior",
fill="Voting Behavior",
x=NULL,
y="Fraction of Subjects") +
theme(legend.position="none") +
coord_flip()
getwd()
getwd("~/MIDS/w241/live-session/")
setwd("~/MIDS/w241/live-session/")
bookdown::render_book()
bookdown::render_book()
bookdown::render_book()
bookdown::render_book()
install.packages('stargazer')
bookdown::render_book()
install.packages('AER')
bookdown::render_book()
bookdown::render_book(output_format = 'pdf')
bookdown::render_book(output_format = pdf_book())
?bookdown::render_book
bookdown::render_book(output_format = "pdf_book")
bookdown::render_book(output_format = "pdf_document")
